!function(t){function e(e){for(var n,a,s=e[0],c=e[1],h=e[2],l=0,u=[];l<s.length;l++)a=s[l],o[a]&&u.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(d&&d(e);u.length;)u.shift()();return r.push.apply(r,h||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},o={1:0},r=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="./";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var h=0;h<s.length;h++)e(s[h]);var d=c;r.push([62,0]),i()}({62:function(t,e,i){"use strict";i.r(e);i(16);var n=i(25),o=i(34),r=i(33),a=i.n(r);function s(t,e,i){t.clearRect(0,0,i.width,i.height),t.drawImage(e,0,0,i.width,i.height)}function c(t,e,i,n){for(const{score:o,position:r,part:a}of e)o<i||(t.beginPath(),t.arc(r.x*n.x,r.y*n.y,10,0,2*Math.PI),t.fillStyle={rightWrist:"#ff0000",leftWrist:"#0000ff"}[a]||"#00ff00",t.fill())}window.onload=async function(){const{data:{posenetVersion:t,imageScaleFactor:e,outputStride:i,minPoseScore:r,minPartScore:h,maxPoseDetections:d,nmsRadius:l,frameSize:u}}=await o.get("./config.json"),p={width:window.innerWidth,height:window.innerHeight},f={x:p.width/u.width,y:p.height/u.height*u.height/u.width},[w,g]=await Promise.all([n.load(t),async function(t){const e=document.createElement("video");return e.width=t.width,e.height=t.height,e.srcObject=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),await new Promise(t=>e.onloadedmetadata=t),e.play(),e}(u)]),y=document.createElement("canvas");y.width=u.width,y.height=u.height;const m=y.getContext("2d"),v=document.getElementById("output");v.width=p.width,v.height=p.height;const x=v.getContext("2d");x.scale(-1,1),x.translate(-p.width,0);const b=new a.a;b.showPanel(0),document.body.appendChild(b.dom);const P=document.getElementById("box");P.addEventListener("show",({detail:{type:t}})=>{P.style.display||(P.src=`./${t}.gif`,P.style.display="block",setTimeout(()=>P.style.display="",2e3))});let E=0;for(;;){await new Promise(t=>requestAnimationFrame(t)),b.begin(),s(m,g,u);const t=await w.estimateMultiplePoses(y,e,!1,i,d,h,l);s(x,g,p);for(const{score:e,keypoints:i}of t){if(e<r)continue;const t=i.slice(5,11);if(E%2==0){const e=[(t[4].position.x-t[0].position.x)/-u.width,(t[4].position.y-t[0].position.y)/-u.height],i=[(t[5].position.x-t[1].position.x)/-u.width,(t[5].position.y-t[1].position.y)/-u.height];if(e[1]>0&&i[1]>0)continue;if(e[1]>0){P.dispatchEvent(new CustomEvent("show",{detail:{type:"left"}}));continue}if(i[1]>0){P.dispatchEvent(new CustomEvent("show",{detail:{type:"right"}}));continue}}c(x,t,h,f)}E+=1,b.end()}}}});
//# sourceMappingURL=app.941679c240573dfd7a32.js.map
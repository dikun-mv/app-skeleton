!function(t){function e(e){for(var n,a,s=e[0],c=e[1],d=e[2],l=0,p=[];l<s.length;l++)a=s[l],o[a]&&p.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(h&&h(e);p.length;)p.shift()();return r.push.apply(r,d||[]),i()}function i(){for(var t,e=0;e<r.length;e++){for(var i=r[e],n=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(n=!1)}n&&(r.splice(e--,1),t=a(a.s=i[0]))}return t}var n={},o={1:0},r=[];function a(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=n,a.d=function(t,e,i){a.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},a.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="./";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var h=c;r.push([62,0]),i()}({62:function(t,e,i){"use strict";i.r(e);i(16);var n=i(25),o=i(34),r=i(33),a=i.n(r);function s(t,e,i){t.clearRect(0,0,i.width,i.height),t.drawImage(e,0,0,i.width,i.height)}function c(t,e,i,n){for(const{score:o,position:r,part:a}of e)o<i||(t.beginPath(),t.arc(r.x*n.x,r.y*n.y,10,0,2*Math.PI),t.fillStyle={rightWrist:"#ff0000",leftWrist:"#0000ff"}[a]||"#00ff00",t.fill())}window.onload=async function(){const{data:{posenetVersion:t,imageScaleFactor:e,outputStride:i,minPoseScore:r,minPartScore:d,maxPoseDetections:h,nmsRadius:l,frameSize:p}}=await o.get("./config.json"),u={width:window.innerWidth,height:window.innerHeight},f={x:u.width/p.width,y:u.height/p.height*p.height/p.width},[w,g]=await Promise.all([n.load(t),async function(t){const e=document.createElement("video");return e.width=t.width,e.height=t.height,e.srcObject=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),await new Promise(t=>e.onloadedmetadata=t),e.play(),e}(p)]),y=document.createElement("canvas");y.width=p.width,y.height=p.height;const m=y.getContext("2d"),v=document.getElementById("output");v.width=u.width,v.height=u.height;const b=v.getContext("2d");b.scale(-1,1),b.translate(-u.width,0);const x=new a.a;x.showPanel(0),document.body.appendChild(x.dom);const P=document.getElementById("box");P.addEventListener("show",({detail:{type:t}})=>{"block"!==P.style.display&&(P.src=`./${t}.${"left"===t?"jpg":"gif"}`,P.style.display="block")}),P.addEventListener("hide",()=>{P.style.display&&(P.style.display="")});t:for(;;){await new Promise(t=>requestAnimationFrame(t)),x.begin(),s(m,g,p);const t=await w.estimateMultiplePoses(y,e,!1,i,h,d,l);s(b,g,u);const n=[];for(const{score:e,keypoints:i}of t){if(e<r)continue;const t=i.slice(5,11);c(b,t,d,f),n.push([[(t[4].position.x-t[0].position.x)/-p.width,(t[4].position.y-t[0].position.y)/-p.height],[(t[5].position.x-t[1].position.x)/-p.width,(t[5].position.y-t[1].position.y)/-p.height]])}for(const t of n)if(!(t[0][1]>0&&t[1][1]>0)&&(t[0][1]>0||t[1][1]>0)){P.dispatchEvent(new CustomEvent("show",{detail:{type:t[0][1]>0?"left":"right"}})),x.end();continue t}P.dispatchEvent(new Event("hide")),x.end()}}}});
//# sourceMappingURL=app.50dc4578c672427f5efd.js.map
!function(t){function e(e){for(var n,r,s=e[0],c=e[1],d=e[2],l=0,p=[];l<s.length;l++)r=s[l],o[r]&&p.push(o[r][0]),o[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);for(h&&h(e);p.length;)p.shift()();return a.push.apply(a,d||[]),i()}function i(){for(var t,e=0;e<a.length;e++){for(var i=a[e],n=!0,s=1;s<i.length;s++){var c=i[s];0!==o[c]&&(n=!1)}n&&(a.splice(e--,1),t=r(r.s=i[0]))}return t}var n={},o={1:0},a=[];function r(e){if(n[e])return n[e].exports;var i=n[e]={i:e,l:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=n,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="./";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=e,s=s.slice();for(var d=0;d<s.length;d++)e(s[d]);var h=c;a.push([62,0]),i()}({62:function(t,e,i){"use strict";i.r(e);i(16);var n=i(25),o=i(34),a=i(33),r=i.n(a);function s(t,e,i){t.clearRect(0,0,i.width,i.height),t.drawImage(e,0,0,i.width,i.height)}function c(t,e,i,n){for(const{score:o,position:a,part:r}of e)o<i||(t.beginPath(),t.arc(a.x*n.x,a.y*n.y,10,0,2*Math.PI),t.fillStyle={rightWrist:"#ff0000",leftWrist:"#0000ff"}[r]||"#00ff00",t.fill())}window.onload=async function(){const{data:{posenetVersion:t,imageScaleFactor:e,outputStride:i,minPoseScore:a,minPartScore:d,maxPoseDetections:h,nmsRadius:l,frameSize:p}}=await o.get("./config.json"),u={width:window.innerWidth,height:window.innerHeight},f={x:u.width/p.width,y:u.height/p.height*p.height/p.width},[w,g]=await Promise.all([n.load(t),async function(t){const e=document.createElement("video");return e.width=t.width,e.height=t.height,e.srcObject=await navigator.mediaDevices.getUserMedia({audio:!1,video:!0}),await new Promise(t=>e.onloadedmetadata=t),e.play(),e}(p)]),y=document.createElement("canvas");y.width=p.width,y.height=p.height;const m=y.getContext("2d"),v=document.getElementById("output");v.width=u.width,v.height=u.height;const b=v.getContext("2d");b.scale(-1,1),b.translate(-u.width,0);const x=new r.a;x.showPanel(0),document.body.appendChild(x.dom);const P=document.getElementById("box");P.addEventListener("show",({detail:{type:t}})=>{"block"!==P.style.display&&(P.src=`./${t}.${"left"===t?"jpg":"gif"}`,P.style.display="block")}),P.addEventListener("hide",()=>{P.style.display&&(P.style.display="")});let E=0;for(;;){await new Promise(t=>requestAnimationFrame(t)),x.begin(),s(m,g,p);const t=await w.estimateMultiplePoses(y,e,!1,i,h,d,l);s(b,g,u);for(const{score:e,keypoints:i}of t){if(e<a)continue;const t=i.slice(5,11);if(c(b,t,d,f),E%2==0){const e=[(t[4].position.x-t[0].position.x)/-p.width,(t[4].position.y-t[0].position.y)/-p.height],i=[(t[5].position.x-t[1].position.x)/-p.width,(t[5].position.y-t[1].position.y)/-p.height];if(e[1]>0&&i[1]>0){P.dispatchEvent(new Event("hide"));continue}if(e[1]>0||i[1]>0){P.dispatchEvent(new CustomEvent("show",{detail:{type:e[1]>0?"left":"right"}}));continue}P.dispatchEvent(new Event("hide"))}}E+=1,x.end()}}}});
//# sourceMappingURL=app.daba7b504409081a3837.js.map